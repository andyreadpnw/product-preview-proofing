(this["webpackJsonpproduct-preview-proofing"]=this["webpackJsonpproduct-preview-proofing"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),s=a.n(o),l=(a(66),a(17)),c=a(6),i=a(7),u=a(9),p=a(8),m=a(10),d=(a(42),a(16)),h=a(12),v=a(101),g=a(102),E=a(103),_=a(118),f=a(104),b=a(105),y=a(106),S=a(20),k="https://product-preview-backend.herokuapp.com",C=function(){return{"Content-Type":"application/json",Accepts:"application/json",Authorization:localStorage.getItem("token")}},w={login:function(e){return fetch("".concat(k,"/auth"),{method:"POST",headers:C(),body:JSON.stringify(e)}).then((function(e){return e.json()}))},getCurrentUser:function(){return fetch("".concat(k,"/current_user"),{headers:C()}).then((function(e){return e.json()}))}},A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).toggle=a.toggle.bind(Object(h.a)(a)),a.state={isOpen:!1,allTicketsClicked:!1,username:"login",user_group_id:null},a.enterTickets=a.enterTickets.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.getCurrentUser().then((function(t){t.error||e.setState({username:t.user_id.username,user_group_id:t.user_id.user_group_id})}))}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"enterTickets",value:function(){this.setState({allTicketsClicked:!this.state.allTicketsClicked})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v.a,Object(d.a)({color:"faded",light:!0,toggleable:!0},"color","info"),r.a.createElement(g.a,{right:!0,onClick:this.toggle}),r.a.createElement(E.a,{tag:S.b,to:"/home"},"Product Preview"),r.a.createElement(_.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(f.a,{className:"ml-auto",navbar:!0},r.a.createElement(b.a,null,r.a.createElement(y.a,{tag:S.b,to:"/tickets",enterTickets:this.enterTickets,allTicketsClicked:this.state.allTicketsClicked},"Product Tickets")),r.a.createElement(b.a,null,r.a.createElement(y.a,{tag:S.b,to:"/userprofile"},"Welcome ",this.state.username)),r.a.createElement(b.a,null,r.a.createElement(y.a,{href:"https://github.com/andyreadpnw"},"Github")),r.a.createElement(y.a,{tag:S.b,to:"/",onClick:function(){return e.props.logout()}},"Sign Out")))))}}]),t}(r.a.Component),P=a(115),j=a(116),O=a(117),I=a(107),U=a(108),V=a(109),D=a(110),T=a(111),M=a(112),R=a(113),L=(a(33),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.product,a=t.id,n=t.name,o=t.product_main_image,s=t.parent_id,l=t.department,c=t.style_id,i=this.props.currentUser.user_id.user_group_id;return r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(U.a,{bg:"light",raised:!0,className:"CardItem-main-card",onClick:function(){return e.props.enterProduct(a)}},r.a.createElement(V.a,{top:!0,width:"100%",src:o,alt:"Card image cap",className:"ProductCard-img"}),r.a.createElement(D.a,null,n),r.a.createElement(T.a,{className:"list-group-flush"},r.a.createElement(M.a,null,"Product ID: ",s),r.a.createElement(M.a,null,"Department: ",l),r.a.createElement(M.a,null,"Style ID: ",c)),1===i&&r.a.createElement(R.a,{color:"danger",onClick:function(){return e.props.removeProduct(a)}},"Delete"))))}}]),t}(n.Component)),N=a(114),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).updateApprovalValue=function(e){var t=e.target.value;switch(a.props.currentUser.user_id.user_group_id){case 1:case 2:"ecomm",a.setState({ecomm_approver:a.props.currentUser.user_id.username,ecomm_approve:t});break;case 3:"plm",a.setState({plm_approver:a.props.currentUser.user_id.username,plm_approve:t});break;case 4:"merchant",a.setState({merchant_approver:a.props.currentUser.user_id.username,merchant_approve:t});break;case 5:"planner",a.setState({planner_approver:a.props.currentUser.user_id.username,planner_approve:t});break;case 6:"other",a.setState({other_approver:a.props.currentUser.user_id.username,other_approve:t})}},a.updateCommentValue=function(e){var t=e.target.value;switch(a.props.currentUser.user_id.user_group_id){case 1:case 2:"ecomm",a.setState({ecomm_approver:a.props.currentUser.user_id.username,ecomm_comment:t});break;case 3:"plm",a.setState({plm_approver:a.props.currentUser.user_id.username,plm_comment:t});break;case 4:"merchant",a.setState({merchant_approver:a.props.currentUser.user_id.username,merchant_comment:t});break;case 5:"planner",a.setState({planner_approver:a.props.currentUser.user_id.username,planner_comment:t});break;case 6:"other",a.setState({other_approver:a.props.currentUser.user_id.username,other_comment:t})}},a.submitApproval=function(e){console.log(e),console.log(a.props.currentUser.user_id.user_group_id);var t=a.props.currentUser.user_id.user_group_id;console.log(t);var n="ecomm";switch(t){case 1:case 2:n="ecomm",a.setState({ecomm_approve:a.state.ecomm_approve,ecomm_approver:a.state.ecomm_approver,ecomm_comment:a.state.ecomm_comment});break;case 3:n="plm",a.setState({plm_approve:a.state.ecomm_approve,plm_approver:a.state.ecomm_approver,plm_comment:a.state.ecomm_comment});break;case 4:n="merchant",a.setState({merchant_approve:a.state.ecomm_approve,merchant_approver:a.state.ecomm_approver,merchant_comment:a.state.ecomm_comment});break;case 5:n="planner",a.setState({planner_approve:a.state.ecomm_approve,planner_approver:a.state.ecomm_approver,planner_comment:a.state.ecomm_comment});break;case 6:n="other",a.setState({other_approve:a.state.ecomm_approve,other_approver:a.state.ecomm_approver,other_comment:a.state.ecomm_comment})}var r=n+"_approve",o=n+"_approver",s=n+"_comment";console.log(r),console.log(o),console.log(s),fetch("https://product-preview-backend.herokuapp.com/approvals/"+e,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({ecomm_approve:a.state.ecomm_approve,ecomm_approver:a.state.ecomm_approver,ecomm_comment:a.state.ecomm_comment,plm_approve:a.state.plm_approve,plm_approver:a.state.plm_approver,plm_comment:a.state.plm_comment,merchant_approve:a.state.merchant_approve,merchant_approver:a.state.merchant_approver,merchant_comment:a.state.merchant_comment,planner_approve:a.state.planner_approve,planner_approver:a.state.planner_approver,planner_comment:a.state.planner_comment,other_approve:a.state.other_approve,other_approver:a.state.other_approver,other_comment:a.state.other_comment})}).then((function(e){1===Math.floor(e.status/200)?(a.props.updateApprovals(),console.log("Edited log successfully")):console.log("ERROR",e)}))},a.state={ecomm_approve:a.props.ecomm_approve,ecomm_approver:a.props.ecomm_approver,ecomm_comment:a.props.ecomm_comment,plm_approve:a.props.plm_approve,plm_approver:a.props.plm_approver,plm_comment:a.props.plm_comment,merchant_approve:a.props.merchant_approve,merchant_approver:a.props.merchant_approver,merchant_comment:a.props.merchant_comment,planner_approve:a.props.planner_approve,planner_approver:a.props.planner_approver,planner_comment:a.props.planner_comment,other_approve:a.props.other_approve,other_approver:a.props.other_approver,other_comment:a.props.other_comment},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.product,a=t.parent_id,n=t.name,o=t.department,s=t.style_id,l=t.color_id,c=t.product_copy,i=t.product_main_image,u=t.fit,p=t.fabrication,m=t.style_type,d=this.props.approvals[0],h=d.id,v=d.ecomm_approve,g=d.ecomm_approver,E=d.ecomm_comment,_=d.plm_approve,f=d.plm_approver,b=d.plm_comment,y=d.merchant_approve,S=d.merchant_approver,k=d.merchant_comment,C=d.planner_approve,w=d.planner_approver,A=d.planner_comment,P=d.other_approve,j=d.other_approver,O=d.other_comment;return console.log(this.props.approvals),console.log(this.props),r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("hgroup",null,r.a.createElement("h1",null,n),r.a.createElement("h4",null,"Product ID: ",a),r.a.createElement("img",{src:i}))),r.a.createElement("div",{class:"grid-container"},r.a.createElement("div",{class:"grid-item"},r.a.createElement("section",null,r.a.createElement("h5",null,"Summary Copy: ",c),r.a.createElement("li",null,"Department: ",o),r.a.createElement("li",null,"Style ID: ",s),r.a.createElement("li",null,"Color ID: ",l),r.a.createElement("li",null,"Size Type: ",m),r.a.createElement("details",null,r.a.createElement("summary",null,"Product Features"),r.a.createElement("ul",null,r.a.createElement("li",null,"Fit: ",u),r.a.createElement("li",null,"Fabrication: ",p))))),r.a.createElement("div",{class:"grid-item2"},r.a.createElement(N.a,{striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Team"),r.a.createElement("th",null,"Approve"),r.a.createElement("th",null,"Approver"),r.a.createElement("th",null,"Comments"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Ecomm"),r.a.createElement("td",null,v),r.a.createElement("td",null,g),r.a.createElement("td",null,E)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"PLM"),r.a.createElement("td",null,_),r.a.createElement("td",null,f),r.a.createElement("td",null,b)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Merchant"),r.a.createElement("td",null,y),r.a.createElement("td",null,S),r.a.createElement("td",null,k)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Planner"),r.a.createElement("td",null,C),r.a.createElement("td",null,w),r.a.createElement("td",null,A)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Other"),r.a.createElement("td",null,P),r.a.createElement("td",null,j),r.a.createElement("td",null,O)))),"Status:",r.a.createElement("select",{value:this.state.approval,onChange:this.updateApprovalValue},r.a.createElement("option",{value:"Incomplete"},"Incomplete"),r.a.createElement("option",{value:"In-Progress"},"In-Progress"),r.a.createElement("option",{value:"Approved"},"Approved")),r.a.createElement("br",null),"Approver Comment:",r.a.createElement("input",{type:"text",className:"form-control",value:this.state.comment,name:"comment",placeholder:this.state.comment,onChange:this.updateCommentValue}),r.a.createElement("button",{onClick:function(){return e.submitApproval(h)}},"Submit"))))}}]),t}(n.Component),G=a(29),F=a.n(G),J=a(22),q=a.n(J),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).updateLogBodyValue=function(e){var t=e.target.value;a.setState({log_body:t})},a.updateDivisionValue=function(e){var t=e.target.value;a.setState({division:t})},a.updateSiteValue=function(e){var t=e.target.value;a.setState({site:t})},a.updateIssueClassValue=function(e){var t=e.target.value;a.setState({issue_class:t})},a.updateIssueTypeValue=function(e){var t=e.target.value;a.setState({issue_type:t})},a.updateIssueClassValue=function(e){var t=e.target.value;a.setState({issue_class:t})},a.updateIssueClassValue=function(e){var t=e.target.value;a.setState({issue_class:t})},a.updateEnvironmentValue=function(e){var t=e.target.value;a.setState({environment:t})},a.updateStatusValue=function(e){var t=e.target.value;a.setState({status:t})},a.updatePriorityValue=function(e){var t=e.target.value;a.setState({priority:t})},a.updateAssignedValue=function(e){var t=e.target.value;a.setState({assigned:t})},a.updateCCValue=function(e){var t=e.target.value;a.setState({cc:t})},a.updateDueDateValue=function(e){var t=e.target.value;a.setState({due_date:t})},a.handleRowClicked=function(e){a.setState({logSelected:e.id,status:e.status,priority:e.priority,issue_type:e.issue_type,issue_class:e.issue_class,site:e.site,division:e.division,environment:e.environment,log_body:e.log_body,assigned:e.assigned,cc:e.cc,due_date:e.due_date}),a.openModal()},a.submitLog=function(e){0!==a.state.logSelected?fetch("https://product-preview-backend.herokuapp.com/product_logs/"+e,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({status:a.state.status,priority:a.state.priority,issue_type:a.state.issue_type,issue_class:a.state.issue_class,site:a.state.site,division:a.state.division,environment:a.state.environment,log_body:a.state.log_body,assigned:a.state.assigned,cc:a.state.cc,due_date:a.state.due_date})}).then((function(e){1===Math.floor(e.status/200)?(a.props.updateProductTickets(),a.closeEditModal(),console.log("Edited log successfully")):console.log("ERROR",e)})):fetch("https://product-preview-backend.herokuapp.com/product_logs",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({status:a.state.status,priority:a.state.priority,issue_type:a.state.issue_type,issue_class:a.state.issue_class,site:a.state.site,division:a.state.division,environment:a.state.environment,log_body:a.state.log_body,assigned:a.state.assigned,cc:a.state.cc,due_date:a.state.due_date,color_id:a.props.product[0].color_id,department:a.props.product[0].department,fabrication:a.props.product[0].fabrication,fit:a.props.product[0].fit,name:a.props.product[0].name,parent_id:a.props.product[0].parent_id,product_copy:a.props.product[0].product_copy,product_id:a.props.product[0].id,style_id:a.props.product[0].style_id})}).then((function(e){1===Math.floor(e.status/200)?(console.log("New Product Log submitted"),a.props.updateProductTickets(),a.closeEditModal()):console.log("ERROR",e)}))},a.state={visible:!1,editVisible:!1,logSelected:1,status:"none",priority:"none",issue_type:"none",issue_class:"none",site:"none",division:"none",environment:"none",log_body:"none",assigned:"none",cc:"none",due_date:"none",data:a.props.data},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data})}},{key:"openModal",value:function(){this.setState({visible:!0})}},{key:"closeModal",value:function(){this.setState({visible:!1})}},{key:"deleteTicket",value:function(e){var t=this;this.setState({visible:!1}),fetch("https://product-preview-backend.herokuapp.com/product_logs/"+e,{method:"delete"}).then((function(e){t.props.updateProductTickets()})).then((function(e){return console.log(e.message)})).catch((function(e){console.error(e)})),console.log("Deleted Log"),this.closeEditModal()}},{key:"closeEditModal",value:function(){this.setState({editVisible:!1})}},{key:"handleNewTicket",value:function(){this.setState({editVisible:!0,logSelected:0,status:"none",priority:"none",issue_type:"none",issue_class:"none",site:"none",division:"none",environment:"none",log_body:"none",assigned:"none",cc:"none",due_date:"none"})}},{key:"openEditModal",value:function(){this.setState({visible:!1,editVisible:!0})}},{key:"render",value:function(){var e=this,t=this.state.data;return r.a.createElement("div",null,r.a.createElement(F.a,{title:"Product Logs",columns:[{name:"ID",selector:"id",sortable:!0,width:"45px"},{name:"Status",selector:"status",sortable:!0,right:!0,width:"90px"},{name:"Priority",selector:"priority",sortable:!0,right:!0,width:"90px"},{name:"Issue Type",selector:"issue_type",sortable:!0,right:!0,width:"120px"},{name:"Issue Class",selector:"issue_class",sortable:!0,right:!0,width:"140px"},{name:"Site",selector:"site",sortable:!0,right:!0,width:"90px"},{name:"Division",selector:"division",sortable:!0,right:!0,width:"90px"},{name:"Environment",selector:"environment",sortable:!0,right:!0,width:"90px"},{name:"Action Request",selector:"log_body",sortable:!0,right:!0,grow:120},{name:"Assigned",selector:"assigned",sortable:!0,right:!0,width:"120px"},{name:"CC",selector:"cc",sortable:!0,right:!0},{name:"Date Prediction",selector:"date_due",sortable:!0,right:!0}],data:t,onRowClicked:this.handleRowClicked,onClick:this.handleClick,pagination:!0}),r.a.createElement(q.a,{visible:this.state.visible,effect:"fadeInUp",onClickAway:function(){return e.closeModal()}},r.a.createElement("div",{id:"tickets-edit"},r.a.createElement("h1",null,this.props.product[0].name),r.a.createElement("p",null,"ID: ",this.state.logSelected),r.a.createElement("p",null,"Status: ",this.state.status),r.a.createElement("p",null,"Priority: ",this.state.priority),r.a.createElement("p",null,"Issue Class: ",this.state.issue_class),r.a.createElement("p",null,"Issue Type: ",this.state.issue_type),r.a.createElement("p",null,"Site: ",this.state.site),r.a.createElement("p",null,"Division: ",this.state.division),r.a.createElement("p",null,"Environment: ",this.state.environment),r.a.createElement("p",null,"Action Requested: ",this.state.log_body),r.a.createElement("p",null,"Assigned: ",this.state.assigned),r.a.createElement("p",null,"CC: ",this.state.cc),r.a.createElement("p",null,"Date Requested: ",this.state.due_date),r.a.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.openEditModal()}},"Edit"),r.a.createElement("br",null),r.a.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.closeModal()}},"Close"),r.a.createElement("br",null),r.a.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.deleteTicket(e.state.logSelected)}},"Delete"))),r.a.createElement(q.a,{visible:this.state.editVisible,effect:"fadeInUp",onClickAway:function(){return e.closeEditModal()}},r.a.createElement("div",{id:"tickets-edit"},r.a.createElement("h1",null,"Log ID:",this.state.logSelected),"Status:",r.a.createElement("select",{value:this.state.status,onChange:this.updateStatusValue},r.a.createElement("option",{value:"none"},"Select"),r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"In-Progress"},"In-Progress"),r.a.createElement("option",{value:"Complete"},"Complete")),r.a.createElement("p",null),"Priority:",r.a.createElement("select",{value:this.state.priority,onChange:this.updatePriorityValue},r.a.createElement("option",{value:"none"},"Select"),r.a.createElement("option",{value:"Low"},"Low"),r.a.createElement("option",{value:"Medium"},"Medium"),r.a.createElement("option",{value:"High"},"High"),r.a.createElement("option",{value:"Urgent"},"Urgent")),r.a.createElement("p",null),"Issue Class:",r.a.createElement("select",{value:this.state.issue_type,onChange:this.updateIssueTypeValue},r.a.createElement("option",{value:"none"},"Select"),r.a.createElement("option",{value:"Product Data"},"Product Data"),r.a.createElement("option",{value:"Image Issue"},"Image Issue"),r.a.createElement("option",{value:"Incorrect Load"},"Incorrect Load"),r.a.createElement("option",{value:"Copy"},"Copy")),r.a.createElement("p",null),"Issue Type:",r.a.createElement("select",{value:this.state.issue_class,onChange:this.updateIssueClassValue},r.a.createElement("option",{value:"none"},"Select"),r.a.createElement("option",{value:"Prevent Load until Fixed"},"Prevent Load until Fixed"),r.a.createElement("option",{value:"Load but Correct ASAP"},"Incorrect Load")),r.a.createElement("p",null),"Site:",r.a.createElement("select",{value:this.state.site,onChange:this.updateSiteValue},r.a.createElement("option",{value:"none"},"Select"),r.a.createElement("option",{value:"US Site"},"US Site"),r.a.createElement("option",{value:"CA Site"},"CA Site")),r.a.createElement("p",null),"Division:",r.a.createElement("select",{value:this.state.division,onChange:this.updateDivisionValue},r.a.createElement("option",{value:"none"},"Select"),r.a.createElement("option",{value:"Ecomm"},"Ecomm"),r.a.createElement("option",{value:"Planner"},"Planner"),r.a.createElement("option",{value:"Merchant"},"Merchant"),r.a.createElement("option",{value:"PLM"},"Planner")),r.a.createElement("p",null),"Environment:",r.a.createElement("select",{value:this.state.environment,onChange:this.updateEnvironmentValue},r.a.createElement("option",{value:"none"},"Select"),r.a.createElement("option",{value:"Proofing"},"Proofing"),r.a.createElement("option",{value:"Product Live"},"Product Live")),r.a.createElement("p",null),"Request:",r.a.createElement("input",{type:"text",className:"form-control",value:this.state.log_body,name:"logBody",placeholder:this.state.log_body,onChange:this.updateLogBodyValue}),r.a.createElement("p",null),"Assigned:",r.a.createElement("select",{value:this.state.assigned,onChange:this.updateAssignedValue},r.a.createElement("option",{value:"none"},"Select"),r.a.createElement("option",{value:"Select"},"Andy Read"),r.a.createElement("option",{value:"Andy Read"},"Andy Read")),r.a.createElement("p",null),"CC:",r.a.createElement("select",{value:this.state.cc,onChange:this.updateCCValue},r.a.createElement("option",{value:"none"},"Select"),r.a.createElement("option",{value:"Select"},"Andy Read"),r.a.createElement("option",{value:"Andy Read"},"Andy Read")),r.a.createElement("p",null),"Due Date:",r.a.createElement("input",{type:"text",className:"form-control",value:this.state.due_date,name:"due_date",placeholder:this.state.due_date,onChange:this.updateDueDateValue}),r.a.createElement("p",null),r.a.createElement("button",{onClick:function(){return e.submitLog(e.state.logSelected)}},"Submit"),r.a.createElement("p",null),r.a.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.closeEditModal()}},"Close"))),r.a.createElement("input",{type:"button",value:"Log a New Ticket",onClick:function(){return e.handleNewTicket()}}))}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={productsArr:[{id:1}],isProductClicked:!1,isEmptyState:!0,ticketsArr:[{id:1}],approvalsArr:[{id:1}],productSelected:0},a.updateProductTickets=a.updateProductTickets.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("token")?w.getCurrentUser().then((function(t){console.log(t),t.error?e.props.history.push("/login"):(e.setState({productSelected:0}),fetch("https://product-preview-backend.herokuapp.com/products").then((function(e){return e.json()})).then((function(t){e.setState({productsArr:t.map((function(e){return e}))})})),fetch("https://product-preview-backend.herokuapp.com/product_logs").then((function(e){return e.json()})).then((function(t){e.setState({ticketsArr:t.map((function(e){return e}))})})),fetch("https://product-preview-backend.herokuapp.com/approvals").then((function(e){return e.json()})).then((function(t){e.setState({approvalsArr:t.map((function(e){return e}))})})))})):this.props.history.push("/login")}},{key:"updateProductTickets",value:function(){var e=this;fetch("https://product-preview-backend.herokuapp.com/product_logs").then((function(e){return e.json()})).then((function(t){e.setState({ticketsArr:t.map((function(e){return e}))},(function(){e.setState(Object(l.a)({},e.state,{productsArr:e.state.productsArr.filter((function(t){return t.id===e.state.productSelected})),ticketsArr:e.state.ticketsArr.filter((function(t){return t.product.id===e.state.productSelected})),productSelected:e.state.productSelected}))}))}))}},{key:"updateApprovals",value:function(){var e=this;fetch("https://product-preview-backend.herokuapp.com/approvals").then((function(e){return e.json()})).then((function(t){e.setState({approvalsArr:t.map((function(e){return e}))},(function(){e.setState(Object(l.a)({},e.state,{productsArr:e.state.productsArr.filter((function(t){return t.id===e.state.productSelected})),approvalsArr:e.state.approvalsArr.filter((function(t){return t.product.id===e.state.productSelected})),productSelected:e.state.productSelected}))}))}))}},{key:"removeProduct",value:function(e){this.setState({productsArr:this.state.productsArr.filter((function(t){return t.id!==e}))}),fetch("https://product-preview-backend.herokuapp.com/products/"+e,{method:"delete"}).then((function(e){return e.json()})).then((function(e){return console.log(e.message)})).catch((function(e){console.error(e)}))}},{key:"removeAllProducts",value:function(){console.log("here"),fetch("https://product-preview-backend.herokuapp.com/products",{method:"delete"}).then((function(e){return e.json()})).then((function(e){return console.log(e.message)})).catch((function(e){console.error(e)}))}},{key:"enterProduct",value:function(e){this.setState(Object(l.a)({},this.state,{isProductClicked:!0,isEmptyState:!1,productsArr:this.state.productsArr.filter((function(t){return t.id===e})),ticketsArr:this.state.ticketsArr.filter((function(t){return t.product.id===e})),approvalsArr:this.state.approvalsArr.filter((function(t){return t.product.id===e})),productSelected:e}))}},{key:"render",value:function(){var e=this;console.log("RENDER ON MAIN AREA",this.props);var t=this.props.currentUser.user_id.user_group_id,a=this.state.productsArr.map((function(t){return r.a.createElement(P.a,{sm:"4"},e.state.isEmptyState&&r.a.createElement(L,{key:t.id,enterProduct:e.enterProduct.bind(e),removeProduct:e.removeProduct.bind(e),product:t,currentUser:e.props.currentUser}),e.state.isProductClicked&&r.a.createElement(x,{product:t,approvals:e.state.approvalsArr,updateApprovals:e.updateApprovals.bind(e),currentUser:e.props.currentUser}))}));return r.a.createElement(j.a,{fluid:!0},r.a.createElement(O.a,null,a),r.a.createElement(O.a,null,this.state.isProductClicked&&r.a.createElement(B,{data:this.state.ticketsArr,product:this.state.productsArr,updateProductTickets:this.updateProductTickets})),1===t&&this.state.isEmptyState&&r.a.createElement("button",{onClick:this.removeAllProducts},"Delete All Products"))}}]),t}(n.Component),W=(a(84),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){var t=Object(l.a)({},a.state.fields,Object(d.a)({},e.target.name,e.target.value));a.setState({fields:t})},a.handleSubmit=function(e){e.preventDefault(),w.login(a.state.fields).then((function(e){console.log(e.message),"Invalid username or password"===e.message?a.setState({loginError:!0}):e.error?a.setState({error:!0}):(a.setState({loginError:!1}),a.props.onLogin(e,(function(){a.props.history.push("/home")})),console.log(a.state.error))}))},a.state={error:!1,fields:{username:"",password:""},loginError:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.fields;return r.a.createElement("div",null,this.state.error?r.a.createElement("h1",null,"Connection Unsucessful"):null,this.state.loginError?r.a.createElement("h1",null,"Username or Password was incorrect"):null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"auth-wrapper"},r.a.createElement("div",{className:"auth-inner"},r.a.createElement("h1",null,"Product Preview"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"ui field"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{name:"username",placeholder:"username",value:e.username,onChange:this.handleChange})),r.a.createElement("div",{className:"ui field"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"password",type:"password",placeholder:"password",value:e.password,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"ui basic green button"},"Login"),r.a.createElement("div",null,r.a.createElement("a",null,"The username/passwords for demo purposes:")," ",r.a.createElement("a",null,"username:Admin, password: pass"),r.a.createElement("br",null),r.a.createElement("a",null,"username: andy.read, password: pass"),r.a.createElement("br",null),r.a.createElement("a",null,"username: random.plm, password: pass"),r.a.createElement("br",null),r.a.createElement("a",null,"username: random.merchant, password: pass"),r.a.createElement("br",null),r.a.createElement("a",null,"username: random.planner, password: pass"),r.a.createElement("br",null),r.a.createElement("a",null,"username: random.other, password: pass"))))))))}}]),t}(r.a.Component)),Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).updateLogBodyValue=function(e){var t=e.target.value;a.setState({log_body:t})},a.updateDivisionValue=function(e){var t=e.target.value;a.setState({division:t})},a.updateSiteValue=function(e){var t=e.target.value;a.setState({site:t})},a.updateIssueClassValue=function(e){var t=e.target.value;a.setState({issue_class:t})},a.updateIssueTypeValue=function(e){var t=e.target.value;a.setState({issue_type:t})},a.updateIssueClassValue=function(e){var t=e.target.value;a.setState({issue_class:t})},a.updateIssueClassValue=function(e){var t=e.target.value;a.setState({issue_class:t})},a.updateEnvironmentValue=function(e){var t=e.target.value;a.setState({environment:t})},a.updateStatusValue=function(e){var t=e.target.value;a.setState({status:t})},a.updatePriorityValue=function(e){var t=e.target.value;a.setState({priority:t})},a.updateAssignedValue=function(e){var t=e.target.value;a.setState({assigned:t})},a.updateCCValue=function(e){var t=e.target.value;a.setState({cc:t})},a.updateDueDateValue=function(e){var t=e.target.value;a.setState({due_date:t})},a.handleRowClicked=function(e){a.setState({logSelected:e.id,status:e.status,priority:e.priority,issue_type:e.issue_type,issue_class:e.issue_class,site:e.site,division:e.division,environment:e.environment,log_body:e.log_body,assigned:e.assigned,cc:e.cc,due_date:e.due_date}),a.openModal()},a.submitLog=function(e){console.log(a.state.logSelected),fetch("https://product-preview-backend.herokuapp.com/product_logs/"+e,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({status:a.state.status,priority:a.state.priority,issue_type:a.state.issue_type,issue_class:a.state.issue_class,site:a.state.site,division:a.state.division,environment:a.state.environment,log_body:a.state.log_body,assigned:a.state.assigned,cc:a.state.cc,due_date:a.state.due_date})}).then((function(e){1===Math.floor(e.status/200)?(a.updateAllTickets(),a.closeEditModal()):console.log("ERROR",e)}))},a.state={ticketsArr:1,visible:!1,editVisible:!1,logSelected:1,status:"none",priority:"none",issue_type:"none",issue_class:"none",site:"none",division:"none",environment:"none",log_body:"none",assigned:"none",cc:"none",due_date:"none",data:a.props.data},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;fetch("https://product-preview-backend.herokuapp.com/product_logs").then((function(e){return e.json()})).then((function(t){e.setState({ticketsArr:t.map((function(e){return e}))})}))}},{key:"openModal",value:function(){this.setState({visible:!0})}},{key:"closeModal",value:function(){this.setState({visible:!1})}},{key:"deleteTicket",value:function(e){var t=this;this.setState({visible:!1}),fetch("https://product-preview-backend.herokuapp.com/product_logs/"+e,{method:"delete"}).then((function(e){t.props.updateAllTickets()})).then((function(e){return console.log(e.message)})).catch((function(e){console.error(e)})),console.log("deleted"),this.closeModal()}},{key:"closeEditModal",value:function(){this.setState({editVisible:!1})}},{key:"updateAllTickets",value:function(){var e=this;fetch("https://product-preview-backend.herokuapp.com/product_logs").then((function(e){return e.json()})).then((function(t){e.setState({ticketsArr:t.map((function(e){return e}))})}))}},{key:"openEditModal",value:function(){this.setState({visible:!1,editVisible:!0})}},{key:"render",value:function(){var e=this,t=this.state.ticketsArr;return r.a.createElement("div",null,r.a.createElement(F.a,{title:"Product Logs",columns:[{name:"ID",selector:"id",sortable:!0,width:"50px"},{name:"Product ID",selector:"product.parent_id",sortable:!0,width:"100px"},{name:"Status",selector:"status",sortable:!0,right:!0,width:"120px"},{name:"Priority",selector:"priority",sortable:!0,right:!0,width:"90px"},{name:"Issue Type",selector:"issue_type",sortable:!0,right:!0,width:"120px"},{name:"Issue Class",selector:"issue_class",sortable:!0,right:!0,width:"170px"},{name:"Site",selector:"site",sortable:!0,right:!0,width:"90px"},{name:"Division",selector:"division",sortable:!0,right:!0,width:"90px"},{name:"Environment",selector:"environment",sortable:!0,right:!0,width:"110px"},{name:"Action Request",selector:"log_body",sortable:!0,right:!0,grow:120},{name:"Assigned",selector:"assigned",sortable:!0,right:!0,width:"120px"},{name:"CC",selector:"cc",sortable:!0,right:!0},{name:"Date Prediction",selector:"date_due",sortable:!0,right:!0}],data:t,onRowClicked:this.handleRowClicked,onClick:this.handleClick,pagination:!0}),r.a.createElement(q.a,{visible:this.state.visible,effect:"fadeInUp",id:"modal1",onClickAway:function(){return e.closeModal()}},r.a.createElement("div",{id:"tickets-edit"},r.a.createElement("p",null,"ID: ",this.state.logSelected),r.a.createElement("p",null,"Status: ",this.state.status),r.a.createElement("p",null,"Priority: ",this.state.priority),r.a.createElement("p",null,"Issue Class: ",this.state.issue_class),r.a.createElement("p",null,"Issue Type: ",this.state.issue_type),r.a.createElement("p",null,"Site: ",this.state.site),r.a.createElement("p",null,"Division: ",this.state.division),r.a.createElement("p",null,"Environment: ",this.state.environment),r.a.createElement("p",null,"Action Requested: ",this.state.log_body),r.a.createElement("p",null,"Assigned: ",this.state.assigned),r.a.createElement("p",null,"CC: ",this.state.cc),r.a.createElement("p",null,"Date Requested: ",this.state.due_date),r.a.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.openEditModal()}},"Edit"),r.a.createElement("br",null),r.a.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.closeModal()}},"Close"),r.a.createElement("br",null),r.a.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.deleteTicket(e.state.logSelected)}},"Delete"))),r.a.createElement(q.a,{visible:this.state.editVisible,effect:"fadeInUp",id:"modal2",onClickAway:function(){return e.closeEditModal()}},r.a.createElement("div",{id:"tickets-edit"},r.a.createElement("h1",null,"Log ID:",this.state.logSelected),"Status:",r.a.createElement("select",{value:this.state.status,onChange:this.updateStatusValue},r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"In-Progress"},"In-Progress"),r.a.createElement("option",{value:"Complete"},"Complete")),r.a.createElement("p",null),"Priority:",r.a.createElement("select",{value:this.state.priority,onChange:this.updatePriorityValue},r.a.createElement("option",{value:"Low"},"Low"),r.a.createElement("option",{value:"Medium"},"Medium"),r.a.createElement("option",{value:"High"},"High"),r.a.createElement("option",{value:"Urgent"},"Urgent")),r.a.createElement("p",null),"Issue Class:",r.a.createElement("select",{value:this.state.issue_type,onChange:this.updateIssueTypeValue},r.a.createElement("option",{value:"Product Data"},"Product Data"),r.a.createElement("option",{value:"Image Issue"},"Image Issue"),r.a.createElement("option",{value:"Incorrect Load"},"Incorrect Load"),r.a.createElement("option",{value:"Copy"},"Copy")),r.a.createElement("p",null),"Issue Type:",r.a.createElement("select",{value:this.state.issue_class,onChange:this.updateIssueClassValue},r.a.createElement("option",{value:"Prevent Load until Fixed"},"Prevent Load until Fixed"),r.a.createElement("option",{value:"Load but Correct ASAP"},"Incorrect Load")),r.a.createElement("p",null),"Site:",r.a.createElement("select",{value:this.state.site,onChange:this.updateSiteValue},r.a.createElement("option",{value:"US Site"},"US Site"),r.a.createElement("option",{value:"CA Site"},"CA Site")),r.a.createElement("p",null),"Division:",r.a.createElement("select",{value:this.state.division,onChange:this.updateDivisionValue},r.a.createElement("option",{value:"Ecomm"},"Ecomm"),r.a.createElement("option",{value:"Planner"},"Planner"),r.a.createElement("option",{value:"Merchant"},"Merchant"),r.a.createElement("option",{value:"PLM"},"Planner")),r.a.createElement("p",null),"Environment:",r.a.createElement("select",{value:this.state.environment,onChange:this.updateEnvironmentValue},r.a.createElement("option",{value:"Proofing"},"Proofing"),r.a.createElement("option",{value:"Product Live"},"Product Live")),r.a.createElement("p",null),"Request:",r.a.createElement("input",{type:"text",className:"form-control",value:this.state.log_body,name:"logBody",placeholder:this.state.log_body,onChange:this.updateLogBodyValue}),r.a.createElement("p",null),"Assigned:",r.a.createElement("select",{value:this.state.assigned,onChange:this.updateAssignedValue},r.a.createElement("option",{value:"Andy Read"},"Andy Read")),r.a.createElement("p",null),"CC:",r.a.createElement("select",{value:this.state.cc,onChange:this.updateCCValue},r.a.createElement("option",{value:"Andy Read"},"Andy Read")),r.a.createElement("p",null),"Due Date:",r.a.createElement("input",{type:"text",className:"form-control",value:this.state.due_date,name:"due_date",placeholder:this.state.due_date,onChange:this.updateDueDateValue}),r.a.createElement("p",null),r.a.createElement("button",{onClick:function(){return e.submitLog(e.state.logSelected)}},"Submit"),r.a.createElement("p",null),r.a.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.closeEditModal()}},"Close"))))}}]),t}(n.Component),z=a(59),$=a(57),K=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleReadCSV=function(e){console.log(e.data[1]);for(var t=1;t<e.data.length;t++){var a=e.data[t][0],n=e.data[t][1],r=e.data[t][2],o=e.data[t][3],s=e.data[t][4],l=e.data[t][5],c=e.data[t][6],i=e.data[t][7],u=e.data[t][8],p=e.data[t][9],m=e.data[t][10];console.log(a,n,r,o,s,l,c,i,u,p,m),fetch("https://product-preview-backend.herokuapp.com/products",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({parent_id:a,name:n,department:r,style_id:o,color_id:s,product_copy:l,product_main_image:c,fit:i,fabrication:u,style_type:p,product_load_id:m})}).then((function(t){1===Math.floor(t.status/200)?(console.log("successful"),console.log(t),fetch("https://product-preview-backend.herokuapp.com/products").then((function(e){return e.json()})).then((function(t){console.log(t);var a=Math.max.apply(Math,Object(z.a)(t.map((function(e){return e.id})))),n=a-e.data.length+2;console.log(a),console.log(n);for(var r=a-n+1,o=0;o<=r;o++)fetch("https://product-preview-backend.herokuapp.com/approvals",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({ecomm_approve:"Incomplete",ecomm_approver:"Unassigned",ecomm_comment:"No Comments Yet",plm_approve:"Incomplete",plm_approver:"Unassigned",plm_comment:"No Comments Yet",merchant_approve:"Incomplete",merchant_approver:"Unassigned",merchant_comment:"No Comments Yet",planner_approve:"Incomplete",planner_approver:"Unassigned",planner_comment:"No Comments Yet",other_approve:"Incomplete",other_approver:"Unassigned",other_comment:"No Comments Yet",product_id:n+o})}).then((function(e){1===Math.floor(e.status/200)?console.log("successful"):console.log("ERROR",e)}))}))):console.log("ERROR",t)}))}},a.handleOnError=function(e,t,a,n){console.log(e)},a.handleImportOffer=function(){a.fileInput.current.click()},a.handleNewUserSubmit=function(){console.log({username:a.state.newUsername,password:a.state.newPass,user_group_id:a.state.newUserGroupID}),fetch("https://product-preview-backend.herokuapp.com/users",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:a.state.newUsername,password:a.state.newPass,user_group_id:a.state.newUserGroupID})}).then((function(e){1===Math.floor(e.status/200)?(console.log(e),console.log("successful"),a.refreshLoginForm()):console.log("ERROR",e)}))},a.refreshLoginForm=function(){a.setState({newUsername:"Select a new Username",newPass:"Select a new Password",newUserGroupID:"Select the group ID"})},a.updateUsernameValue=function(e){var t=e.target.value;a.setState({newUsername:t})},a.updateUserGroupValue=function(e){var t=e.target.value;a.setState({newUserGroupID:t})},a.updatePassValue=function(e){var t=e.target.value;a.setState({newPass:t})},a.fileInput=r.a.createRef(),a.state={username:null,user_group_id:null,newUsername:"Select a new Username",newPass:"Select a new Password",newUserGroupID:"Select the group ID"},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.getCurrentUser().then((function(t){e.setState({username:t.user_id.username,user_group_id:t.user_id.user_group_id})})),console.log(this.state.username)}},{key:"render",value:function(){var e=this,t=this.state.user_group_id;return r.a.createElement("div",null,"Username: ",this.state.username,r.a.createElement("p",null),"User Group: ",this.state.user_group_id,r.a.createElement("p",null),r.a.createElement($.a,{onFileLoaded:this.handleReadCSV,inputRef:this.fileInput,style:{display:"none"},onError:this.handleOnError}),1===t&&r.a.createElement("h2",null,"Admin Only Actions:"),r.a.createElement("p",null),1===t&&r.a.createElement("button",{onClick:this.handleImportOffer},"Import New Products"),r.a.createElement("p",null),1===t&&r.a.createElement("h5",null,"Create a New User:"),1===t&&r.a.createElement("span",null,"User groups to select: Admin(1), Ecomm(2), PLM(3), Merchant(4), Planner(5), Other(6)"),1===t&&r.a.createElement("input",{type:"text",className:"form-control",value:this.state.newUsername,name:"username",placeholder:this.state.newUsername,onChange:this.updateUsernameValue}),r.a.createElement("p",null),1===t&&r.a.createElement("input",{type:"text",className:"form-control",value:this.state.newUserGroupID,name:"groupID",placeholder:this.state.newUserGroupID,onChange:this.updateUserGroupValue}),r.a.createElement("p",null),1===t&&r.a.createElement("input",{type:"text",className:"form-control",value:this.state.newPass,name:"pass",placeholder:this.state.newPass,onChange:this.updatePassValue}),r.a.createElement("p",null),1===t&&r.a.createElement("button",{onClick:function(){return e.handleNewUserSubmit()}},"Submit"))}}]),t}(n.Component),Q=a(18),X=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).login=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log(t.user.username);var n=Object.assign({},e.state.auth,{user:{user_id:t}});console.log("UPDATED STATE",n),localStorage.setItem("token",t.jwt),e.setState({auth:n},(function(){console.log(e.state),a()}))},e.logout=function(){localStorage.removeItem("token"),e.setState({auth:{user:{}}})},e.state={auth:{user:{user_id:{id:null,username:null}}}},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("token")&&w.getCurrentUser().then((function(t){console.log(t);var a=Object(l.a)({},e.state.auth,{user_id:t});e.setState({auth:a})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(S.a,{basename:"/"},r.a.createElement(Q.a,{path:"/",exact:!0,render:function(t){return r.a.createElement(W,Object.assign({onLogin:e.login},t))}}),r.a.createElement(Q.a,{exact:!0,path:"/home",render:function(t){return r.a.createElement("div",null,r.a.createElement(A,Object.assign({logout:e.logout},t)),r.a.createElement(H,Object.assign({currentUser:e.state.auth.user},t)))}}),r.a.createElement(Q.a,{path:"/userprofile",render:function(t){return r.a.createElement("div",null,r.a.createElement(A,{logout:e.logout}),r.a.createElement(K,Object.assign({},t,{currentUser:e.state.auth})))}}),r.a.createElement(Q.a,{path:"/tickets",render:function(t){return r.a.createElement("div",null,r.a.createElement(A,{logout:e.logout}),r.a.createElement(Y,Object.assign({},t,{currentUser:e.state.auth})))}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(99);s.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},33:function(e,t,a){},42:function(e,t,a){},61:function(e,t,a){e.exports=a(100)},66:function(e,t,a){},87:function(e,t){},89:function(e,t){}},[[61,1,2]]]);
//# sourceMappingURL=main.139a639a.chunk.js.map