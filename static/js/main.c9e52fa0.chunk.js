(this["webpackJsonpproduct-preview-proofing"]=this["webpackJsonpproduct-preview-proofing"]||[]).push([[0],{26:function(e,t,a){},35:function(e,t,a){},53:function(e,t,a){e.exports=a(91)},58:function(e,t,a){},78:function(e,t){},80:function(e,t){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(22),l=a.n(r),s=(a(58),a(14)),c=a(6),p=a(7),i=a(9),u=a(8),m=a(10),d=(a(35),a(13)),v=a(11),h=a(93),_=a(94),E=a(95),g=a(110),f=a(96),y=a(97),b=a(98),S="https://product-preview-backend.herokuapp.com",C={"Content-Type":"application/json",Accepts:"application/json",Authorization:localStorage.getItem("token")},k={login:function(e){return fetch("".concat(S,"/auth"),{method:"POST",headers:C,body:JSON.stringify(e)}).then((function(e){return e.json()}))},getCurrentUser:function(){return fetch("".concat(S,"/current_user"),{headers:C}).then((function(e){return e.json()}))}},w=(o.a.Component,a(107)),P=a(108),I=a(109),A=a(99),j=a(100),V=a(101),O=a(102),D=a(103),M=a(104),R=a(105),T=(a(26),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.product,a=t.id,n=t.name,r=t.product_main_image,l=t.parent_id,s=t.department,c=t.style_id,p=this.props.currentUser.user_id.user_group_id;return o.a.createElement("div",null,o.a.createElement(A.a,null,o.a.createElement(j.a,{bg:"light",raised:!0,className:"CardItem-main-card",onClick:function(){return e.props.enterProduct(a)}},o.a.createElement(V.a,{top:!0,width:"100%",src:r,alt:"Card image cap",className:"ProductCard-img"}),o.a.createElement(O.a,null,n),o.a.createElement(D.a,{className:"list-group-flush"},o.a.createElement(M.a,null,"Product ID: ",l),o.a.createElement(M.a,null,"Department: ",s),o.a.createElement(M.a,null,"Style ID: ",c)),1===p&&o.a.createElement(R.a,{color:"danger",onClick:function(){return e.props.removeProduct(a)}},"Delete"))))}}]),t}(n.Component)),U=a(106),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).updateApprovalValue=function(e){var t=e.target.value;switch(a.props.currentUser.user_id.user_group_id){case 1:case 2:"ecomm",a.setState({ecomm_approver:a.props.currentUser.user_id.username,ecomm_approve:t});break;case 3:"plm",a.setState({plm_approver:a.props.currentUser.user_id.username,plm_approve:t});break;case 4:"merchant",a.setState({merchant_approver:a.props.currentUser.user_id.username,merchant_approve:t});break;case 5:"planner",a.setState({planner_approver:a.props.currentUser.user_id.username,planner_approve:t});break;case 6:"other",a.setState({other_approver:a.props.currentUser.user_id.username,other_approve:t})}},a.updateCommentValue=function(e){var t=e.target.value;switch(a.props.currentUser.user_id.user_group_id){case 1:case 2:"ecomm",a.setState({ecomm_approver:a.props.currentUser.user_id.username,ecomm_comment:t});break;case 3:"plm",a.setState({plm_approver:a.props.currentUser.user_id.username,plm_comment:t});break;case 4:"merchant",a.setState({merchant_approver:a.props.currentUser.user_id.username,merchant_comment:t});break;case 5:"planner",a.setState({planner_approver:a.props.currentUser.user_id.username,planner_comment:t});break;case 6:"other",a.setState({other_approver:a.props.currentUser.user_id.username,other_comment:t})}},a.submitApproval=function(e){console.log(e),console.log(a.props.currentUser.user_id.user_group_id);var t="ecomm";switch(a.props.currentUser.user_id.user_group_id){case 1:case 2:t="ecomm",a.setState({ecomm_approve:a.state.ecomm_approve,ecomm_approver:a.state.ecomm_approver,ecomm_comment:a.state.ecomm_comment});break;case 3:t="plm",a.setState({plm_approve:a.state.ecomm_approve,plm_approver:a.state.ecomm_approver,plm_comment:a.state.ecomm_comment});break;case 4:t="merchant",a.setState({merchant_approve:a.state.ecomm_approve,merchant_approver:a.state.ecomm_approver,merchant_comment:a.state.ecomm_comment});break;case 5:t="planner",a.setState({planner_approve:a.state.ecomm_approve,planner_approver:a.state.ecomm_approver,planner_comment:a.state.ecomm_comment});break;case 6:t="other",a.setState({other_approve:a.state.ecomm_approve,other_approver:a.state.ecomm_approver,other_comment:a.state.ecomm_comment})}var n=t+"_approve",o=t+"_approver",r=t+"_comment";console.log(n),console.log(o),console.log(r),fetch("https://product-preview-backend.herokuapp.com/approvals/"+e,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({ecomm_approve:a.state.ecomm_approve,ecomm_approver:a.state.ecomm_approver,ecomm_comment:a.state.ecomm_comment,plm_approve:a.state.plm_approve,plm_approver:a.state.plm_approver,plm_comment:a.state.plm_comment,merchant_approve:a.state.merchant_approve,merchant_approver:a.state.merchant_approver,merchant_comment:a.state.merchant_comment,planner_approve:a.state.planner_approve,planner_approver:a.state.planner_approver,planner_comment:a.state.planner_comment,other_approve:a.state.other_approve,other_approver:a.state.other_approver,other_comment:a.state.other_comment})}).then((function(e){1===Math.floor(e.status/200)?(a.props.updateApprovals(),console.log("Edited log successfully")):console.log("ERROR",e)}))},a.state={ecomm_approve:a.props.ecomm_approve,ecomm_approver:a.props.ecomm_approver,ecomm_comment:a.props.ecomm_comment,plm_approve:a.props.plm_approve,plm_approver:a.props.plm_approver,plm_comment:a.props.plm_comment,merchant_approve:a.props.merchant_approve,merchant_approver:a.props.merchant_approver,merchant_comment:a.props.merchant_comment,planner_approve:a.props.planner_approve,planner_approver:a.props.planner_approver,planner_comment:a.props.planner_comment,other_approve:a.props.other_approve,other_approver:a.props.other_approver,other_comment:a.props.other_comment},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.product,a=t.parent_id,n=t.name,r=t.department,l=t.style_id,s=t.color_id,c=t.product_copy,p=t.product_main_image,i=t.fit,u=t.fabrication,m=t.style_type,d=this.props.approvals[0],v=d.id,h=d.ecomm_approve,_=d.ecomm_approver,E=d.ecomm_comment,g=d.plm_approve,f=d.plm_approver,y=d.plm_comment,b=d.merchant_approve,S=d.merchant_approver,C=d.merchant_comment,k=d.planner_approve,w=d.planner_approver,P=d.planner_comment,I=d.other_approve,A=d.other_approver,j=d.other_comment;return console.log(this.props.approvals),o.a.createElement("div",null,o.a.createElement("header",null,o.a.createElement("hgroup",null,o.a.createElement("h1",null,n),o.a.createElement("h4",null,"Product ID: ",a),o.a.createElement("img",{src:p}))),o.a.createElement("div",{class:"grid-container"},o.a.createElement("div",{class:"grid-item"},o.a.createElement("section",null,o.a.createElement("h5",null,"Summary Copy: ",c),o.a.createElement("li",null,"Department: ",r),o.a.createElement("li",null,"Style ID: ",l),o.a.createElement("li",null,"Color ID: ",s),o.a.createElement("li",null,"Size Type: ",m),o.a.createElement("details",null,o.a.createElement("summary",null,"Product Features"),o.a.createElement("ul",null,o.a.createElement("li",null,"Fit: ",i),o.a.createElement("li",null,"Fabrication: ",u))))),o.a.createElement("div",{class:"grid-item2"},o.a.createElement(U.a,{striped:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Team"),o.a.createElement("th",null,"Approve"),o.a.createElement("th",null,"Approver"),o.a.createElement("th",null,"Comments"))),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",{scope:"row"},"Ecomm"),o.a.createElement("td",null,h),o.a.createElement("td",null,_),o.a.createElement("td",null,E)),o.a.createElement("tr",null,o.a.createElement("th",{scope:"row"},"PLM"),o.a.createElement("td",null,g),o.a.createElement("td",null,f),o.a.createElement("td",null,y)),o.a.createElement("tr",null,o.a.createElement("th",{scope:"row"},"Merchant"),o.a.createElement("td",null,b),o.a.createElement("td",null,S),o.a.createElement("td",null,C)),o.a.createElement("tr",null,o.a.createElement("th",{scope:"row"},"Planner"),o.a.createElement("td",null,k),o.a.createElement("td",null,w),o.a.createElement("td",null,P)),o.a.createElement("tr",null,o.a.createElement("th",{scope:"row"},"Other"),o.a.createElement("td",null,I),o.a.createElement("td",null,A),o.a.createElement("td",null,j)))),"Status:",o.a.createElement("select",{value:this.state.approval,onChange:this.updateApprovalValue},o.a.createElement("option",{value:"Incomplete"},"Incomplete"),o.a.createElement("option",{value:"In-Progress"},"In-Progress"),o.a.createElement("option",{value:"Approved"},"Approved")),o.a.createElement("br",null),"Approver Comment:",o.a.createElement("input",{type:"text",className:"form-control",value:this.state.comment,name:"comment",placeholder:this.state.comment,onChange:this.updateCommentValue}),o.a.createElement("button",{onClick:function(){return e.submitApproval(v)}},"Submit"))))}}]),t}(n.Component),x=a(23),N=a.n(x),J=a(18),B=a.n(J),F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).updateLogBodyValue=function(e){var t=e.target.value;a.setState({log_body:t})},a.updateDivisionValue=function(e){var t=e.target.value;a.setState({division:t})},a.updateSiteValue=function(e){var t=e.target.value;a.setState({site:t})},a.updateIssueClassValue=function(e){var t=e.target.value;a.setState({issue_class:t})},a.updateIssueTypeValue=function(e){var t=e.target.value;a.setState({issue_type:t})},a.updateIssueClassValue=function(e){var t=e.target.value;a.setState({issue_class:t})},a.updateIssueClassValue=function(e){var t=e.target.value;a.setState({issue_class:t})},a.updateEnvironmentValue=function(e){var t=e.target.value;a.setState({environment:t})},a.updateStatusValue=function(e){var t=e.target.value;a.setState({status:t})},a.updatePriorityValue=function(e){var t=e.target.value;a.setState({priority:t})},a.updateAssignedValue=function(e){var t=e.target.value;a.setState({assigned:t})},a.updateCCValue=function(e){var t=e.target.value;a.setState({cc:t})},a.updateDueDateValue=function(e){var t=e.target.value;a.setState({due_date:t})},a.handleRowClicked=function(e){a.setState({logSelected:e.id,status:e.status,priority:e.priority,issue_type:e.issue_type,issue_class:e.issue_class,site:e.site,division:e.division,environment:e.environment,log_body:e.log_body,assigned:e.assigned,cc:e.cc,due_date:e.due_date}),a.openModal()},a.submitLog=function(e){0!==a.state.logSelected?fetch("http://product-preview-backend.herokuapp.com/product_logs/"+e,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({status:a.state.status,priority:a.state.priority,issue_type:a.state.issue_type,issue_class:a.state.issue_class,site:a.state.site,division:a.state.division,environment:a.state.environment,log_body:a.state.log_body,assigned:a.state.assigned,cc:a.state.cc,due_date:a.state.due_date})}).then((function(e){1===Math.floor(e.status/200)?(a.props.updateProductTickets(),a.closeEditModal(),console.log("Edited log successfully")):console.log("ERROR",e)})):fetch("http://product-preview-backend.herokuapp.com/product_logs",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({status:a.state.status,priority:a.state.priority,issue_type:a.state.issue_type,issue_class:a.state.issue_class,site:a.state.site,division:a.state.division,environment:a.state.environment,log_body:a.state.log_body,assigned:a.state.assigned,cc:a.state.cc,due_date:a.state.due_date,color_id:a.props.product[0].color_id,department:a.props.product[0].department,fabrication:a.props.product[0].fabrication,fit:a.props.product[0].fit,name:a.props.product[0].name,parent_id:a.props.product[0].parent_id,product_copy:a.props.product[0].product_copy,product_id:a.props.product[0].id,style_id:a.props.product[0].style_id})}).then((function(e){1===Math.floor(e.status/200)?(console.log("New Product Log submitted"),a.props.updateProductTickets(),a.closeEditModal()):console.log("ERROR",e)}))},a.state={visible:!1,editVisible:!1,logSelected:1,status:"none",priority:"none",issue_type:"none",issue_class:"none",site:"none",division:"none",environment:"none",log_body:"none",assigned:"none",cc:"none",due_date:"none",data:a.props.data},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data})}},{key:"openModal",value:function(){this.setState({visible:!0})}},{key:"closeModal",value:function(){this.setState({visible:!1})}},{key:"deleteTicket",value:function(e){var t=this;this.setState({visible:!1}),fetch("http://product-preview-backend.herokuapp.com/product_logs/"+e,{method:"delete"}).then((function(e){t.props.updateProductTickets()})).then((function(e){return console.log(e.message)})).catch((function(e){console.error(e)})),console.log("Deleted Log"),this.closeEditModal()}},{key:"closeEditModal",value:function(){this.setState({editVisible:!1})}},{key:"handleNewTicket",value:function(){this.setState({editVisible:!0,logSelected:0,status:"none",priority:"none",issue_type:"none",issue_class:"none",site:"none",division:"none",environment:"none",log_body:"none",assigned:"none",cc:"none",due_date:"none"})}},{key:"openEditModal",value:function(){this.setState({visible:!1,editVisible:!0})}},{key:"render",value:function(){var e=this,t=this.state.data;return o.a.createElement("div",null,o.a.createElement(N.a,{title:"Product Logs",columns:[{name:"ID",selector:"id",sortable:!0,width:"45px"},{name:"Status",selector:"status",sortable:!0,right:!0,width:"90px"},{name:"Priority",selector:"priority",sortable:!0,right:!0,width:"90px"},{name:"Issue Type",selector:"issue_type",sortable:!0,right:!0,width:"120px"},{name:"Issue Class",selector:"issue_class",sortable:!0,right:!0,width:"140px"},{name:"Site",selector:"site",sortable:!0,right:!0,width:"90px"},{name:"Division",selector:"division",sortable:!0,right:!0,width:"90px"},{name:"Environment",selector:"environment",sortable:!0,right:!0,width:"90px"},{name:"Action Request",selector:"log_body",sortable:!0,right:!0,grow:120},{name:"Assigned",selector:"assigned",sortable:!0,right:!0,width:"120px"},{name:"CC",selector:"cc",sortable:!0,right:!0},{name:"Date Prediction",selector:"date_due",sortable:!0,right:!0}],data:t,onRowClicked:this.handleRowClicked,onClick:this.handleClick,pagination:!0}),o.a.createElement(B.a,{visible:this.state.visible,effect:"fadeInUp",onClickAway:function(){return e.closeModal()}},o.a.createElement("div",{id:"tickets-edit"},o.a.createElement("h1",null,this.props.product[0].name),o.a.createElement("p",null,"ID: ",this.state.logSelected),o.a.createElement("p",null,"Status: ",this.state.status),o.a.createElement("p",null,"Priority: ",this.state.priority),o.a.createElement("p",null,"Issue Class: ",this.state.issue_class),o.a.createElement("p",null,"Issue Type: ",this.state.issue_type),o.a.createElement("p",null,"Site: ",this.state.site),o.a.createElement("p",null,"Division: ",this.state.division),o.a.createElement("p",null,"Environment: ",this.state.environment),o.a.createElement("p",null,"Action Requested: ",this.state.log_body),o.a.createElement("p",null,"Assigned: ",this.state.assigned),o.a.createElement("p",null,"CC: ",this.state.cc),o.a.createElement("p",null,"Date Requested: ",this.state.due_date),o.a.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.openEditModal()}},"Edit"),o.a.createElement("br",null),o.a.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.closeModal()}},"Close"),o.a.createElement("br",null),o.a.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.deleteTicket(e.state.logSelected)}},"Delete"))),o.a.createElement(B.a,{visible:this.state.editVisible,effect:"fadeInUp",onClickAway:function(){return e.closeEditModal()}},o.a.createElement("div",{id:"tickets-edit"},o.a.createElement("h1",null,"Log ID:",this.state.logSelected),"Status:",o.a.createElement("select",{value:this.state.status,onChange:this.updateStatusValue},o.a.createElement("option",{value:"none"},"Select"),o.a.createElement("option",{value:"Active"},"Active"),o.a.createElement("option",{value:"In-Progress"},"In-Progress"),o.a.createElement("option",{value:"Complete"},"Complete")),o.a.createElement("p",null),"Priority:",o.a.createElement("select",{value:this.state.priority,onChange:this.updatePriorityValue},o.a.createElement("option",{value:"none"},"Select"),o.a.createElement("option",{value:"Low"},"Low"),o.a.createElement("option",{value:"Medium"},"Medium"),o.a.createElement("option",{value:"High"},"High"),o.a.createElement("option",{value:"Urgent"},"Urgent")),o.a.createElement("p",null),"Issue Class:",o.a.createElement("select",{value:this.state.issue_type,onChange:this.updateIssueTypeValue},o.a.createElement("option",{value:"none"},"Select"),o.a.createElement("option",{value:"Product Data"},"Product Data"),o.a.createElement("option",{value:"Image Issue"},"Image Issue"),o.a.createElement("option",{value:"Incorrect Load"},"Incorrect Load"),o.a.createElement("option",{value:"Copy"},"Copy")),o.a.createElement("p",null),"Issue Type:",o.a.createElement("select",{value:this.state.issue_class,onChange:this.updateIssueClassValue},o.a.createElement("option",{value:"none"},"Select"),o.a.createElement("option",{value:"Prevent Load until Fixed"},"Prevent Load until Fixed"),o.a.createElement("option",{value:"Load but Correct ASAP"},"Incorrect Load")),o.a.createElement("p",null),"Site:",o.a.createElement("select",{value:this.state.site,onChange:this.updateSiteValue},o.a.createElement("option",{value:"none"},"Select"),o.a.createElement("option",{value:"US Site"},"US Site"),o.a.createElement("option",{value:"CA Site"},"CA Site")),o.a.createElement("p",null),"Division:",o.a.createElement("select",{value:this.state.division,onChange:this.updateDivisionValue},o.a.createElement("option",{value:"none"},"Select"),o.a.createElement("option",{value:"Ecomm"},"Ecomm"),o.a.createElement("option",{value:"Planner"},"Planner"),o.a.createElement("option",{value:"Merchant"},"Merchant"),o.a.createElement("option",{value:"PLM"},"Planner")),o.a.createElement("p",null),"Environment:",o.a.createElement("select",{value:this.state.environment,onChange:this.updateEnvironmentValue},o.a.createElement("option",{value:"none"},"Select"),o.a.createElement("option",{value:"Proofing"},"Proofing"),o.a.createElement("option",{value:"Product Live"},"Product Live")),o.a.createElement("p",null),"Request:",o.a.createElement("input",{type:"text",className:"form-control",value:this.state.log_body,name:"logBody",placeholder:this.state.log_body,onChange:this.updateLogBodyValue}),o.a.createElement("p",null),"Assigned:",o.a.createElement("select",{value:this.state.assigned,onChange:this.updateAssignedValue},o.a.createElement("option",{value:"none"},"Select"),o.a.createElement("option",{value:"Select"},"Andy Read"),o.a.createElement("option",{value:"Andy Read"},"Andy Read")),o.a.createElement("p",null),"CC:",o.a.createElement("select",{value:this.state.cc,onChange:this.updateCCValue},o.a.createElement("option",{value:"none"},"Select"),o.a.createElement("option",{value:"Select"},"Andy Read"),o.a.createElement("option",{value:"Andy Read"},"Andy Read")),o.a.createElement("p",null),"Due Date:",o.a.createElement("input",{type:"text",className:"form-control",value:this.state.due_date,name:"due_date",placeholder:this.state.due_date,onChange:this.updateDueDateValue}),o.a.createElement("p",null),o.a.createElement("button",{onClick:function(){return e.submitLog(e.state.logSelected)}},"Submit"),o.a.createElement("p",null),o.a.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.closeEditModal()}},"Close"))),o.a.createElement("input",{type:"button",value:"Log a New Ticket",onClick:function(){return e.handleNewTicket()}}))}}]),t}(n.Component),q=(n.Component,a(75),o.a.Component,n.Component,a(51)),H=a(49),W=(n.Component,function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).login=function(t){console.log(t.user.username);var a=Object(s.a)({},e.state.auth,{user:t});localStorage.setItem("token",t.jwt),e.setState({auth:a},(function(){window.location.href="https://andyreadpnw.github.io/product-preview/home"}))},e.logout=function(){localStorage.removeItem("token"),e.setState({auth:{user:{}}})},e.state={auth:{user:{user_id:{id:null,username:null}}}},e}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){fetch("https://product-preview-backend.herokuapp.com/products").then((function(e){return e.json()})).then(console.log)}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(t,null))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(90);l.a.render(o.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[53,1,2]]]);
//# sourceMappingURL=main.c9e52fa0.chunk.js.map